# Create a library for the Proto files generated by the top-level target
add_library(protobuf ${generate_protos_SRCS})
add_dependencies(protobuf generate_protos)

# Include the Protobuf generated headers
target_include_directories(protobuf PUBLIC
    ${PROTO_GEN_DIR}
    ${Protobuf_INCLUDE_DIR}
)

# Link Protobuf to the library
target_link_libraries(protobuf PUBLIC ${Protobuf_LIBRARIES})